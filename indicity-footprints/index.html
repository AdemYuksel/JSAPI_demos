<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta http-equiv='X-UA-Compatible' content='ie=edge'>
    <title>Indicity</title>
    <link rel='stylesheet' href='https://jsdev.arcgis.com/4.7/esri/css/main.css'>
    <link rel='stylesheet' href='src/css/dc.min.css'>
    <link rel='stylesheet' href='src/css/nouislider.min.css'>
    <link rel='stylesheet' href='src/css/main.css'>
    <script>
        var locationPath = location.pathname.replace(/\/[^\/]+$/, '');
        window.dojoConfig = {
            packages: [{
                name: 'src',
                location: locationPath + 'src/js'
            }, {
                name: 'crossfilter2',
                location: locationPath + 'src/lib',
                main: 'crossfilter.min'
            } , {
                name: 'd3',
                location: locationPath + 'src/lib',
                main: 'd3.min'
            }, {
                name: 'dc',
                location: locationPath + 'src/lib',
                main: 'dc.min'
            }, {
                name: 'nouislider',
                location: locationPath + 'src/lib',
                main: 'nouislider.min'
            }]
        };
    </script>
    <script src='https://jsdev.arcgis.com/4.7'></script>
</head>

<body>
    <div id='view'></div>
    <div id='menu'>
        <h3 class='title'>Buildings in Helsinki</h3>
        <section id='height-section'>
            <h5 class='title'>Buildings height</h5>
            <div id='height-chart'></div>
        </section>
        <section id='age-section'>
            <h5 class='title'>Construction year</h5>
            <div id='year-chart'></div>
        </section>
    </div>
    <script>
        require(['src/Application', 'crossfilter2', 'dojo/domReady!'], function(Application, crossfilter) {

          var settings = {
            scenePortalItem: '03a9607d96244883af64c7f8c7e5de1b',
            footprintPortalItem: '78bf494e25a94eafa6bc1d9a425f4852',
            fields: {
                height: 'measuredHeight',
                year: 'yearCompleted'
            }
          };

          var app = new Application(settings);
          app.init();
        });
    </script>
</body>

</html>
